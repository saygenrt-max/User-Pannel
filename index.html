<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<title>Live Signal</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  background:#020617;
  color:white;
  font-family:Arial, sans-serif;
}
.container{
  max-width:420px;
  margin:auto;
  padding:15px;
}
.banner img{
  width:100%;
  border-radius:14px;
  margin-bottom:15px;
}

/* Main Box */
.box{
  background:#0f172a;
  padding:18px;
  border-radius:14px;
  text-align:center;
}
h2{
  margin-top:0;
  font-size:18px;
}

/* Wingo */
.wingo{
  font-size:18px;
  color:#38bdf8;
  margin-bottom:8px;
}

/* Signal */
.signal{
  font-size:36px;
  margin:10px 0;
  font-weight:bold;
}

/* Message Box */
.message{
  background:#020617;
  padding:14px;
  border-radius:10px;
  margin-top:12px;
  font-size:25px;
  line-height:1.6;
  color:#e5e7eb;
  text-align:center;
}

/* Colors */
.big{color:#22c55e;}
.small{color:#ef4444;}
.green{color:#16a34a;}
.red{color:#dc2626;}
.wait{color:#eab308;}
.hide{display:none;}

/* Activate Voice Button */
.activateBtn{
  background:#f97316;
  color:black;
  padding:12px;
  border:none;
  border-radius:10px;
  font-size:16px;
  margin-top:15px;
  cursor:pointer;
}
</style>
</head>

<body>

<div class="container">

  <!-- üî∞ Banner -->
  <div class="banner">
    <img src="https://i.postimg.cc/Fz0dnHkx/Picsart-26-02-03-01-51-57-523.jpg">
  </div>

  <!-- üëÄ Live Signal -->
  <div class="box">
    <h2>LIVE SIGNAL</h2>
    <div id="wingo" class="wingo">WAITING...</div>
    <div id="signal" class="signal wait">WAIT</div>
    <div id="messageBox" class="message hide"></div>
    
    <!-- üîä Activate Voice for Telegram/In-App Browsers -->
    <button id="activateVoiceBtn" class="activateBtn">‡¶≠‡¶Ø‡¶º‡ßá‡¶∏ ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶ï‡¶∞‡¶§‡ßá ‡¶ü‡ßç‡¶Ø‡¶æ‡¶™ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
  </div>

</div>

<!-- üî• Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
// Firebase Config
firebase.initializeApp({
  apiKey: "AIzaSyBmvhGbc7NA9uLdFGkvdWnej-SdgNzk5yk",
  authDomain: "big-small-86ed8.firebaseapp.com",
  databaseURL: "https://big-small-86ed8-default-rtdb.firebaseio.com",
  projectId: "big-small-86ed8",
  storageBucket: "big-small-86ed8.appspot.com",
  messagingSenderId: "139562557169",
  appId: "1:139562557169:web:16866c69c54bd9e8005350"
});

const db = firebase.database();
const signalRef = db.ref("liveSignal");

let voiceActivated = false;

// üîä Activate Voice Button
document.getElementById("activateVoiceBtn").addEventListener("click", ()=>{
  voiceActivated = true;
  alert("‡¶≠‡¶Ø‡¶º‡ßá‡¶∏ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá! ‡¶è‡¶ñ‡¶® Signal ‡¶è‡¶∞ ‡¶∂‡¶¨‡ßç‡¶¶ ‡¶∂‡ßã‡¶®‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá‡•§");
  document.getElementById("activateVoiceBtn").classList.add("hide");
});

// üîä Bangla Voice Function
function speak(signal, wingoText="", customText=""){
  if(!voiceActivated || !window.speechSynthesis) return;

  let map = {
    BIG:"‡¶¨‡¶ø‡¶ó ‡¶∏‡¶ø‡¶ó‡¶®‡¶æ‡¶≤",
    SMALL:"‡¶∏‡ßç‡¶Æ‡¶≤ ‡¶∏‡¶ø‡¶ó‡¶®‡¶æ‡¶≤",
    GREEN:"‡¶ó‡ßç‡¶∞‡¶ø‡¶® ‡¶∏‡¶ø‡¶ó‡¶®‡¶æ‡¶≤",
    RED:"‡¶∞‡ßá‡¶° ‡¶∏‡¶ø‡¶ó‡¶®‡¶æ‡¶≤",
    START:"‡¶∏‡ßç‡¶ü‡¶æ‡¶∞‡ßç‡¶ü",
    OFF:"‡¶Ö‡¶´",
    HOLD:"‡¶π‡ßã‡¶≤‡ßç‡¶°",
    PROFIT:"‡¶™‡ßç‡¶∞‡¶´‡¶ø‡¶ü",
    MESSAGE: customText || "‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú"
  };

  // Wingo ‡¶∏‡¶Æ‡ßü ‡¶•‡¶æ‡¶ï‡¶≤‡ßá signal ‡¶è‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶Ø‡ßã‡¶ó
  let msgText = signal==="MESSAGE" ? (customText || "‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú") : 
                (wingoText ? `Wingo ${wingoText} ${map[signal] || signal}` : (map[signal] || signal));

  const msg = new SpeechSynthesisUtterance(msgText);
  msg.lang = "bn-BD";
  msg.rate = 0.95;

  speechSynthesis.cancel();
  speechSynthesis.speak(msg);
}

// üîÅ Listen Live Signal
signalRef.on("value", snap=>{
  if(!snap.exists()) return;

  const data = snap.val();
  const signalEl = document.getElementById("signal");
  const messageBox = document.getElementById("messageBox");

  document.getElementById("wingo").innerText = data.wingo || "WAITING...";
  signalEl.innerText = data.signal || "WAIT";

  // Reset class
  signalEl.className = "signal";

  if(data.signal === "BIG") signalEl.classList.add("big");
  else if(data.signal === "SMALL") signalEl.classList.add("small");
  else if(data.signal === "GREEN") signalEl.classList.add("green");
  else if(data.signal === "RED") signalEl.classList.add("red");
  else signalEl.classList.add("wait");

  // üîî Voice Speak
  if(data.signal){
    speak(data.signal, data.wingo);
  }

  // üì¢ Admin Message
  if(data.text && data.text.trim() !== ""){
    messageBox.classList.remove("hide");
    messageBox.innerText = data.text;
    speak("MESSAGE", "", data.text);
  }else{
    messageBox.classList.add("hide");
  }
});
</script>

</body>
</html>
